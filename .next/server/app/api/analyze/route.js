"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/analyze/route";
exports.ids = ["app/api/analyze/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=%2FUsers%2Fa6ee6%2FCascadeProjects%2Fwindsurf-project-4%2Furl-query-analyzer%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fa6ee6%2FCascadeProjects%2Fwindsurf-project-4%2Furl-query-analyzer&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=%2FUsers%2Fa6ee6%2FCascadeProjects%2Fwindsurf-project-4%2Furl-query-analyzer%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fa6ee6%2FCascadeProjects%2Fwindsurf-project-4%2Furl-query-analyzer&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_a6ee6_CascadeProjects_windsurf_project_4_url_query_analyzer_src_app_api_analyze_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/analyze/route.ts */ \"(rsc)/./src/app/api/analyze/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/analyze/route\",\n        pathname: \"/api/analyze\",\n        filename: \"route\",\n        bundlePath: \"app/api/analyze/route\"\n    },\n    resolvedPagePath: \"/Users/a6ee6/CascadeProjects/windsurf-project-4/url-query-analyzer/src/app/api/analyze/route.ts\",\n    nextConfigOutput,\n    userland: _Users_a6ee6_CascadeProjects_windsurf_project_4_url_query_analyzer_src_app_api_analyze_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/analyze/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhbmFseXplJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhbmFseXplJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYW5hbHl6ZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmE2ZWU2JTJGQ2FzY2FkZVByb2plY3RzJTJGd2luZHN1cmYtcHJvamVjdC00JTJGdXJsLXF1ZXJ5LWFuYWx5emVyJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmE2ZWU2JTJGQ2FzY2FkZVByb2plY3RzJTJGd2luZHN1cmYtcHJvamVjdC00JTJGdXJsLXF1ZXJ5LWFuYWx5emVyJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQytDO0FBQzVIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUdBQXVHO0FBQy9HO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDNko7O0FBRTdKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdXJsLXF1ZXJ5LWFuYWx5emVyLz85MDMzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9hNmVlNi9DYXNjYWRlUHJvamVjdHMvd2luZHN1cmYtcHJvamVjdC00L3VybC1xdWVyeS1hbmFseXplci9zcmMvYXBwL2FwaS9hbmFseXplL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hbmFseXplL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYW5hbHl6ZVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYW5hbHl6ZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9hNmVlNi9DYXNjYWRlUHJvamVjdHMvd2luZHN1cmYtcHJvamVjdC00L3VybC1xdWVyeS1hbmFseXplci9zcmMvYXBwL2FwaS9hbmFseXplL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2FuYWx5emUvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=%2FUsers%2Fa6ee6%2FCascadeProjects%2Fwindsurf-project-4%2Furl-query-analyzer%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fa6ee6%2FCascadeProjects%2Fwindsurf-project-4%2Furl-query-analyzer&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/analyze/route.ts":
/*!**************************************!*\
  !*** ./src/app/api/analyze/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n\n// Helper function to decode URL-encoded values recursively\nfunction decodeUrlRecursively(value) {\n    try {\n        let decoded = value;\n        let previousDecoded = \"\";\n        let iterations = 0;\n        const maxIterations = 10; // Prevent infinite loops\n        while(decoded !== previousDecoded && iterations < maxIterations){\n            previousDecoded = decoded;\n            decoded = decodeURIComponent(decoded);\n            iterations++;\n        }\n        return decoded;\n    } catch (error) {\n        return value;\n    }\n}\n// Extract embedded URL from Proofpoint/urldefense URLs\nfunction extractProofpointUrl(url) {\n    try {\n        // Match Proofpoint v3 format: https://urldefense.com/v3/__ENCODED_URL__SIGNATURE\n        const v3Match = url.match(/urldefense\\.com\\/v3\\/__(.+?)__;/);\n        if (v3Match) {\n            let encoded = v3Match[1];\n            // Proofpoint encoding: * = special char, ** = :, etc.\n            // The pattern after __ contains replacement chars\n            const signatureMatch = url.match(/__;([^!]+)!!/);\n            const replacements = signatureMatch ? signatureMatch[1] : \"\";\n            let result = \"\";\n            let replaceIndex = 0;\n            for(let i = 0; i < encoded.length; i++){\n                if (encoded[i] === \"*\") {\n                    if (replacements[replaceIndex]) {\n                        result += replacements[replaceIndex];\n                        replaceIndex++;\n                    }\n                } else {\n                    result += encoded[i];\n                }\n            }\n            return result || encoded;\n        }\n        // Match Proofpoint v2 format\n        const v2Match = url.match(/urldefense\\.proofpoint\\.com\\/v2\\/url\\?u=([^&]+)/);\n        if (v2Match) {\n            let encoded = v2Match[1];\n            // v2 uses -XX- for special chars\n            encoded = encoded.replace(/-3A/g, \":\").replace(/-2F/g, \"/\").replace(/-3F/g, \"?\").replace(/-3D/g, \"=\").replace(/-26/g, \"&\");\n            return encoded;\n        }\n        return null;\n    } catch (error) {\n        console.log(\"Error extracting Proofpoint URL:\", error);\n        return null;\n    }\n}\n// Extract any embedded URLs from query parameters\nfunction findEmbeddedUrls(url) {\n    const urls = [];\n    try {\n        const urlObj = new URL(url);\n        // Check each query parameter for embedded URLs\n        const params = Array.from(urlObj.searchParams.entries());\n        for (const [key, value] of params){\n            const decoded = decodeUrlRecursively(value);\n            if (decoded.startsWith(\"http://\") || decoded.startsWith(\"https://\")) {\n                urls.push(decoded);\n            }\n        }\n    } catch (error) {\n    // Ignore parsing errors\n    }\n    return urls;\n}\nasync function POST(request) {\n    try {\n        const { url, followRedirect = true } = await request.json();\n        if (!url) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"URL is required\"\n            }, {\n                status: 400\n            });\n        }\n        let finalUrl = url;\n        let queryParams = [];\n        // STEP 1: Check if this is a Proofpoint/urldefense URL and extract the real URL\n        const proofpointUrl = extractProofpointUrl(url);\n        if (proofpointUrl) {\n            console.log(\"Extracted Proofpoint URL:\", proofpointUrl);\n            finalUrl = proofpointUrl;\n        }\n        // STEP 2: Try to follow redirects (only if followRedirect is true)\n        if (followRedirect) {\n            try {\n                console.log(\"Attempting to follow redirects for:\", finalUrl);\n                const response = await fetch(finalUrl, {\n                    method: \"GET\",\n                    redirect: \"follow\",\n                    headers: {\n                        \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36\",\n                        Accept: \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\",\n                        \"Accept-Language\": \"en-US,en;q=0.5\"\n                    }\n                });\n                // If we got a different URL after redirects, use it\n                if (response.url && response.url !== finalUrl) {\n                    console.log(\"Redirect found:\", response.url);\n                    finalUrl = response.url;\n                }\n            } catch (fetchError) {\n                console.log(\"Fetch failed (expected for some campaign URLs):\", fetchError);\n            // Continue with the URL we have\n            }\n        } else {\n            console.log(\"Follow redirects disabled, using original URL\");\n            // When followRedirect is false, use the original URL (not the proofpoint extracted one)\n            finalUrl = url;\n        }\n        // STEP 3: Parse the final URL and extract query parameters\n        try {\n            const urlObj = new URL(finalUrl);\n            const rawParams = Array.from(urlObj.searchParams.entries());\n            queryParams = rawParams.map(([name, value])=>{\n                const decodedValue = decodeUrlRecursively(value);\n                const isUrl = decodedValue.startsWith(\"http://\") || decodedValue.startsWith(\"https://\");\n                return {\n                    name,\n                    value: decodedValue,\n                    isUrl\n                };\n            });\n            console.log(\"Found\", queryParams.length, \"query parameters\");\n        } catch (parseError) {\n            console.log(\"URL parsing failed:\", parseError);\n        }\n        // STEP 4: If we still have no params, try parsing the original URL directly\n        if (queryParams.length === 0) {\n            try {\n                const originalUrlObj = new URL(url);\n                const rawParams = Array.from(originalUrlObj.searchParams.entries());\n                queryParams = rawParams.map(([name, value])=>{\n                    const decodedValue = decodeUrlRecursively(value);\n                    const isUrl = decodedValue.startsWith(\"http://\") || decodedValue.startsWith(\"https://\");\n                    return {\n                        name,\n                        value: decodedValue,\n                        isUrl\n                    };\n                });\n            } catch (error) {\n                console.log(\"Original URL parsing failed:\", error);\n            }\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            finalUrl,\n            queryParams,\n            originalUrl: url,\n            wasProofpoint: !!proofpointUrl\n        });\n    } catch (error) {\n        console.error(\"Error processing URL:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to process URL\",\n            details: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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eS1hbmFseXplci8uL3NyYy9hcHAvYXBpL2FuYWx5emUvcm91dGUudHM/MDdkYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGRlY29kZSBVUkwtZW5jb2RlZCB2YWx1ZXMgcmVjdXJzaXZlbHlcbmZ1bmN0aW9uIGRlY29kZVVybFJlY3Vyc2l2ZWx5KHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICB0cnkge1xuICAgIGxldCBkZWNvZGVkID0gdmFsdWU7XG4gICAgbGV0IHByZXZpb3VzRGVjb2RlZCA9IFwiXCI7XG4gICAgbGV0IGl0ZXJhdGlvbnMgPSAwO1xuICAgIGNvbnN0IG1heEl0ZXJhdGlvbnMgPSAxMDsgLy8gUHJldmVudCBpbmZpbml0ZSBsb29wc1xuXG4gICAgd2hpbGUgKGRlY29kZWQgIT09IHByZXZpb3VzRGVjb2RlZCAmJiBpdGVyYXRpb25zIDwgbWF4SXRlcmF0aW9ucykge1xuICAgICAgcHJldmlvdXNEZWNvZGVkID0gZGVjb2RlZDtcbiAgICAgIGRlY29kZWQgPSBkZWNvZGVVUklDb21wb25lbnQoZGVjb2RlZCk7XG4gICAgICBpdGVyYXRpb25zKys7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRlY29kZWQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59XG5cbi8vIEV4dHJhY3QgZW1iZWRkZWQgVVJMIGZyb20gUHJvb2Zwb2ludC91cmxkZWZlbnNlIFVSTHNcbmZ1bmN0aW9uIGV4dHJhY3RQcm9vZnBvaW50VXJsKHVybDogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gIHRyeSB7XG4gICAgLy8gTWF0Y2ggUHJvb2Zwb2ludCB2MyBmb3JtYXQ6IGh0dHBzOi8vdXJsZGVmZW5zZS5jb20vdjMvX19FTkNPREVEX1VSTF9fU0lHTkFUVVJFXG4gICAgY29uc3QgdjNNYXRjaCA9IHVybC5tYXRjaCgvdXJsZGVmZW5zZVxcLmNvbVxcL3YzXFwvX18oLis/KV9fOy8pO1xuICAgIGlmICh2M01hdGNoKSB7XG4gICAgICBsZXQgZW5jb2RlZCA9IHYzTWF0Y2hbMV07XG4gICAgICAvLyBQcm9vZnBvaW50IGVuY29kaW5nOiAqID0gc3BlY2lhbCBjaGFyLCAqKiA9IDosIGV0Yy5cbiAgICAgIC8vIFRoZSBwYXR0ZXJuIGFmdGVyIF9fIGNvbnRhaW5zIHJlcGxhY2VtZW50IGNoYXJzXG4gICAgICBjb25zdCBzaWduYXR1cmVNYXRjaCA9IHVybC5tYXRjaCgvX187KFteIV0rKSEhLyk7XG4gICAgICBjb25zdCByZXBsYWNlbWVudHMgPSBzaWduYXR1cmVNYXRjaCA/IHNpZ25hdHVyZU1hdGNoWzFdIDogXCJcIjtcblxuICAgICAgbGV0IHJlc3VsdCA9IFwiXCI7XG4gICAgICBsZXQgcmVwbGFjZUluZGV4ID0gMDtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbmNvZGVkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChlbmNvZGVkW2ldID09PSBcIipcIikge1xuICAgICAgICAgIGlmIChyZXBsYWNlbWVudHNbcmVwbGFjZUluZGV4XSkge1xuICAgICAgICAgICAgcmVzdWx0ICs9IHJlcGxhY2VtZW50c1tyZXBsYWNlSW5kZXhdO1xuICAgICAgICAgICAgcmVwbGFjZUluZGV4Kys7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCArPSBlbmNvZGVkW2ldO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQgfHwgZW5jb2RlZDtcbiAgICB9XG5cbiAgICAvLyBNYXRjaCBQcm9vZnBvaW50IHYyIGZvcm1hdFxuICAgIGNvbnN0IHYyTWF0Y2ggPSB1cmwubWF0Y2goL3VybGRlZmVuc2VcXC5wcm9vZnBvaW50XFwuY29tXFwvdjJcXC91cmxcXD91PShbXiZdKykvKTtcbiAgICBpZiAodjJNYXRjaCkge1xuICAgICAgbGV0IGVuY29kZWQgPSB2Mk1hdGNoWzFdO1xuICAgICAgLy8gdjIgdXNlcyAtWFgtIGZvciBzcGVjaWFsIGNoYXJzXG4gICAgICBlbmNvZGVkID0gZW5jb2RlZC5yZXBsYWNlKC8tM0EvZywgXCI6XCIpLnJlcGxhY2UoLy0yRi9nLCBcIi9cIikucmVwbGFjZSgvLTNGL2csIFwiP1wiKS5yZXBsYWNlKC8tM0QvZywgXCI9XCIpLnJlcGxhY2UoLy0yNi9nLCBcIiZcIik7XG4gICAgICByZXR1cm4gZW5jb2RlZDtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZyhcIkVycm9yIGV4dHJhY3RpbmcgUHJvb2Zwb2ludCBVUkw6XCIsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vLyBFeHRyYWN0IGFueSBlbWJlZGRlZCBVUkxzIGZyb20gcXVlcnkgcGFyYW1ldGVyc1xuZnVuY3Rpb24gZmluZEVtYmVkZGVkVXJscyh1cmw6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgY29uc3QgdXJsczogc3RyaW5nW10gPSBbXTtcbiAgdHJ5IHtcbiAgICBjb25zdCB1cmxPYmogPSBuZXcgVVJMKHVybCk7XG5cbiAgICAvLyBDaGVjayBlYWNoIHF1ZXJ5IHBhcmFtZXRlciBmb3IgZW1iZWRkZWQgVVJMc1xuICAgIGNvbnN0IHBhcmFtcyA9IEFycmF5LmZyb20odXJsT2JqLnNlYXJjaFBhcmFtcy5lbnRyaWVzKCkpO1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIHBhcmFtcykge1xuICAgICAgY29uc3QgZGVjb2RlZCA9IGRlY29kZVVybFJlY3Vyc2l2ZWx5KHZhbHVlKTtcbiAgICAgIGlmIChkZWNvZGVkLnN0YXJ0c1dpdGgoXCJodHRwOi8vXCIpIHx8IGRlY29kZWQuc3RhcnRzV2l0aChcImh0dHBzOi8vXCIpKSB7XG4gICAgICAgIHVybHMucHVzaChkZWNvZGVkKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gSWdub3JlIHBhcnNpbmcgZXJyb3JzXG4gIH1cbiAgcmV0dXJuIHVybHM7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHVybCwgZm9sbG93UmVkaXJlY3QgPSB0cnVlIH0gPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcblxuICAgIGlmICghdXJsKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJVUkwgaXMgcmVxdWlyZWRcIiB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cblxuICAgIGxldCBmaW5hbFVybCA9IHVybDtcbiAgICBsZXQgcXVlcnlQYXJhbXM6IEFycmF5PHsgbmFtZTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nOyBpc1VybD86IGJvb2xlYW4gfT4gPSBbXTtcblxuICAgIC8vIFNURVAgMTogQ2hlY2sgaWYgdGhpcyBpcyBhIFByb29mcG9pbnQvdXJsZGVmZW5zZSBVUkwgYW5kIGV4dHJhY3QgdGhlIHJlYWwgVVJMXG4gICAgY29uc3QgcHJvb2Zwb2ludFVybCA9IGV4dHJhY3RQcm9vZnBvaW50VXJsKHVybCk7XG4gICAgaWYgKHByb29mcG9pbnRVcmwpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiRXh0cmFjdGVkIFByb29mcG9pbnQgVVJMOlwiLCBwcm9vZnBvaW50VXJsKTtcbiAgICAgIGZpbmFsVXJsID0gcHJvb2Zwb2ludFVybDtcbiAgICB9XG5cbiAgICAvLyBTVEVQIDI6IFRyeSB0byBmb2xsb3cgcmVkaXJlY3RzIChvbmx5IGlmIGZvbGxvd1JlZGlyZWN0IGlzIHRydWUpXG4gICAgaWYgKGZvbGxvd1JlZGlyZWN0KSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkF0dGVtcHRpbmcgdG8gZm9sbG93IHJlZGlyZWN0cyBmb3I6XCIsIGZpbmFsVXJsKTtcblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGZpbmFsVXJsLCB7XG4gICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgIHJlZGlyZWN0OiBcImZvbGxvd1wiLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiVXNlci1BZ2VudFwiOiBcIk1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMjAuMC4wLjAgU2FmYXJpLzUzNy4zNlwiLFxuICAgICAgICAgICAgQWNjZXB0OiBcInRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsKi8qO3E9MC44XCIsXG4gICAgICAgICAgICBcIkFjY2VwdC1MYW5ndWFnZVwiOiBcImVuLVVTLGVuO3E9MC41XCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gSWYgd2UgZ290IGEgZGlmZmVyZW50IFVSTCBhZnRlciByZWRpcmVjdHMsIHVzZSBpdFxuICAgICAgICBpZiAocmVzcG9uc2UudXJsICYmIHJlc3BvbnNlLnVybCAhPT0gZmluYWxVcmwpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlZGlyZWN0IGZvdW5kOlwiLCByZXNwb25zZS51cmwpO1xuICAgICAgICAgIGZpbmFsVXJsID0gcmVzcG9uc2UudXJsO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChmZXRjaEVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRmV0Y2ggZmFpbGVkIChleHBlY3RlZCBmb3Igc29tZSBjYW1wYWlnbiBVUkxzKTpcIiwgZmV0Y2hFcnJvcik7XG4gICAgICAgIC8vIENvbnRpbnVlIHdpdGggdGhlIFVSTCB3ZSBoYXZlXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiRm9sbG93IHJlZGlyZWN0cyBkaXNhYmxlZCwgdXNpbmcgb3JpZ2luYWwgVVJMXCIpO1xuICAgICAgLy8gV2hlbiBmb2xsb3dSZWRpcmVjdCBpcyBmYWxzZSwgdXNlIHRoZSBvcmlnaW5hbCBVUkwgKG5vdCB0aGUgcHJvb2Zwb2ludCBleHRyYWN0ZWQgb25lKVxuICAgICAgZmluYWxVcmwgPSB1cmw7XG4gICAgfVxuXG4gICAgLy8gU1RFUCAzOiBQYXJzZSB0aGUgZmluYWwgVVJMIGFuZCBleHRyYWN0IHF1ZXJ5IHBhcmFtZXRlcnNcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXJsT2JqID0gbmV3IFVSTChmaW5hbFVybCk7XG4gICAgICBjb25zdCByYXdQYXJhbXMgPSBBcnJheS5mcm9tKHVybE9iai5zZWFyY2hQYXJhbXMuZW50cmllcygpKTtcblxuICAgICAgcXVlcnlQYXJhbXMgPSByYXdQYXJhbXMubWFwKChbbmFtZSwgdmFsdWVdKSA9PiB7XG4gICAgICAgIGNvbnN0IGRlY29kZWRWYWx1ZSA9IGRlY29kZVVybFJlY3Vyc2l2ZWx5KHZhbHVlKTtcbiAgICAgICAgY29uc3QgaXNVcmwgPSBkZWNvZGVkVmFsdWUuc3RhcnRzV2l0aChcImh0dHA6Ly9cIikgfHwgZGVjb2RlZFZhbHVlLnN0YXJ0c1dpdGgoXCJodHRwczovL1wiKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBuYW1lLFxuICAgICAgICAgIHZhbHVlOiBkZWNvZGVkVmFsdWUsXG4gICAgICAgICAgaXNVcmwsXG4gICAgICAgIH07XG4gICAgICB9KTtcblxuICAgICAgY29uc29sZS5sb2coXCJGb3VuZFwiLCBxdWVyeVBhcmFtcy5sZW5ndGgsIFwicXVlcnkgcGFyYW1ldGVyc1wiKTtcbiAgICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIlVSTCBwYXJzaW5nIGZhaWxlZDpcIiwgcGFyc2VFcnJvcik7XG4gICAgfVxuXG4gICAgLy8gU1RFUCA0OiBJZiB3ZSBzdGlsbCBoYXZlIG5vIHBhcmFtcywgdHJ5IHBhcnNpbmcgdGhlIG9yaWdpbmFsIFVSTCBkaXJlY3RseVxuICAgIGlmIChxdWVyeVBhcmFtcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsVXJsT2JqID0gbmV3IFVSTCh1cmwpO1xuICAgICAgICBjb25zdCByYXdQYXJhbXMgPSBBcnJheS5mcm9tKG9yaWdpbmFsVXJsT2JqLnNlYXJjaFBhcmFtcy5lbnRyaWVzKCkpO1xuXG4gICAgICAgIHF1ZXJ5UGFyYW1zID0gcmF3UGFyYW1zLm1hcCgoW25hbWUsIHZhbHVlXSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGRlY29kZWRWYWx1ZSA9IGRlY29kZVVybFJlY3Vyc2l2ZWx5KHZhbHVlKTtcbiAgICAgICAgICBjb25zdCBpc1VybCA9IGRlY29kZWRWYWx1ZS5zdGFydHNXaXRoKFwiaHR0cDovL1wiKSB8fCBkZWNvZGVkVmFsdWUuc3RhcnRzV2l0aChcImh0dHBzOi8vXCIpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgdmFsdWU6IGRlY29kZWRWYWx1ZSxcbiAgICAgICAgICAgIGlzVXJsLFxuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJPcmlnaW5hbCBVUkwgcGFyc2luZyBmYWlsZWQ6XCIsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIGZpbmFsVXJsLFxuICAgICAgcXVlcnlQYXJhbXMsXG4gICAgICBvcmlnaW5hbFVybDogdXJsLFxuICAgICAgd2FzUHJvb2Zwb2ludDogISFwcm9vZnBvaW50VXJsLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBwcm9jZXNzaW5nIFVSTDpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHtcbiAgICAgICAgZXJyb3I6IFwiRmFpbGVkIHRvIHByb2Nlc3MgVVJMXCIsXG4gICAgICAgIGRldGFpbHM6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogXCJVbmtub3duIGVycm9yXCIsXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImRlY29kZVVybFJlY3Vyc2l2ZWx5IiwidmFsdWUiLCJkZWNvZGVkIiwicHJldmlvdXNEZWNvZGVkIiwiaXRlcmF0aW9ucyIsIm1heEl0ZXJhdGlvbnMiLCJkZWNvZGVVUklDb21wb25lbnQiLCJlcnJvciIsImV4dHJhY3RQcm9vZnBvaW50VXJsIiwidXJsIiwidjNNYXRjaCIsIm1hdGNoIiwiZW5jb2RlZCIsInNpZ25hdHVyZU1hdGNoIiwicmVwbGFjZW1lbnRzIiwicmVzdWx0IiwicmVwbGFjZUluZGV4IiwiaSIsImxlbmd0aCIsInYyTWF0Y2giLCJyZXBsYWNlIiwiY29uc29sZSIsImxvZyIsImZpbmRFbWJlZGRlZFVybHMiLCJ1cmxzIiwidXJsT2JqIiwiVVJMIiwicGFyYW1zIiwiQXJyYXkiLCJmcm9tIiwic2VhcmNoUGFyYW1zIiwiZW50cmllcyIsImtleSIsInN0YXJ0c1dpdGgiLCJwdXNoIiwiUE9TVCIsInJlcXVlc3QiLCJmb2xsb3dSZWRpcmVjdCIsImpzb24iLCJzdGF0dXMiLCJmaW5hbFVybCIsInF1ZXJ5UGFyYW1zIiwicHJvb2Zwb2ludFVybCIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJyZWRpcmVjdCIsImhlYWRlcnMiLCJBY2NlcHQiLCJmZXRjaEVycm9yIiwicmF3UGFyYW1zIiwibWFwIiwibmFtZSIsImRlY29kZWRWYWx1ZSIsImlzVXJsIiwicGFyc2VFcnJvciIsIm9yaWdpbmFsVXJsT2JqIiwic3VjY2VzcyIsIm9yaWdpbmFsVXJsIiwid2FzUHJvb2Zwb2ludCIsImRldGFpbHMiLCJFcnJvciIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/analyze/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=%2FUsers%2Fa6ee6%2FCascadeProjects%2Fwindsurf-project-4%2Furl-query-analyzer%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fa6ee6%2FCascadeProjects%2Fwindsurf-project-4%2Furl-query-analyzer&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();