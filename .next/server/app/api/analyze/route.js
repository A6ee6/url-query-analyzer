"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/analyze/route";
exports.ids = ["app/api/analyze/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=%2FUsers%2Fa6ee6%2FCascadeProjects%2Fwindsurf-project-4%2Furl-query-analyzer%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fa6ee6%2FCascadeProjects%2Fwindsurf-project-4%2Furl-query-analyzer&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=%2FUsers%2Fa6ee6%2FCascadeProjects%2Fwindsurf-project-4%2Furl-query-analyzer%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fa6ee6%2FCascadeProjects%2Fwindsurf-project-4%2Furl-query-analyzer&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_a6ee6_CascadeProjects_windsurf_project_4_url_query_analyzer_src_app_api_analyze_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/analyze/route.ts */ \"(rsc)/./src/app/api/analyze/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/analyze/route\",\n        pathname: \"/api/analyze\",\n        filename: \"route\",\n        bundlePath: \"app/api/analyze/route\"\n    },\n    resolvedPagePath: \"/Users/a6ee6/CascadeProjects/windsurf-project-4/url-query-analyzer/src/app/api/analyze/route.ts\",\n    nextConfigOutput,\n    userland: _Users_a6ee6_CascadeProjects_windsurf_project_4_url_query_analyzer_src_app_api_analyze_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/analyze/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhbmFseXplJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhbmFseXplJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYW5hbHl6ZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmE2ZWU2JTJGQ2FzY2FkZVByb2plY3RzJTJGd2luZHN1cmYtcHJvamVjdC00JTJGdXJsLXF1ZXJ5LWFuYWx5emVyJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmE2ZWU2JTJGQ2FzY2FkZVByb2plY3RzJTJGd2luZHN1cmYtcHJvamVjdC00JTJGdXJsLXF1ZXJ5LWFuYWx5emVyJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQytDO0FBQzVIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUdBQXVHO0FBQy9HO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDNko7O0FBRTdKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdXJsLXF1ZXJ5LWFuYWx5emVyLz85MDMzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9hNmVlNi9DYXNjYWRlUHJvamVjdHMvd2luZHN1cmYtcHJvamVjdC00L3VybC1xdWVyeS1hbmFseXplci9zcmMvYXBwL2FwaS9hbmFseXplL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hbmFseXplL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYW5hbHl6ZVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYW5hbHl6ZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9hNmVlNi9DYXNjYWRlUHJvamVjdHMvd2luZHN1cmYtcHJvamVjdC00L3VybC1xdWVyeS1hbmFseXplci9zcmMvYXBwL2FwaS9hbmFseXplL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2FuYWx5emUvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=%2FUsers%2Fa6ee6%2FCascadeProjects%2Fwindsurf-project-4%2Furl-query-analyzer%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fa6ee6%2FCascadeProjects%2Fwindsurf-project-4%2Furl-query-analyzer&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/analyze/route.ts":
/*!**************************************!*\
  !*** ./src/app/api/analyze/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n\n// Helper function to decode URL-encoded values recursively\nfunction decodeUrlRecursively(value) {\n    try {\n        let decoded = value;\n        let previousDecoded = \"\";\n        let iterations = 0;\n        const maxIterations = 10; // Prevent infinite loops\n        while(decoded !== previousDecoded && iterations < maxIterations){\n            previousDecoded = decoded;\n            decoded = decodeURIComponent(decoded);\n            iterations++;\n        }\n        return decoded;\n    } catch (error) {\n        return value;\n    }\n}\n// Extract embedded URL from Proofpoint/urldefense URLs\nfunction extractProofpointUrl(url) {\n    try {\n        // Match Proofpoint v3 format: https://urldefense.com/v3/__ENCODED_URL__SIGNATURE\n        const v3Match = url.match(/urldefense\\.com\\/v3\\/__(.+?)__;/);\n        if (v3Match) {\n            let encoded = v3Match[1];\n            // Proofpoint encoding: * = special char, ** = :, etc.\n            // The pattern after __ contains replacement chars\n            const signatureMatch = url.match(/__;([^!]+)!!/);\n            const replacements = signatureMatch ? signatureMatch[1] : \"\";\n            let result = \"\";\n            let replaceIndex = 0;\n            for(let i = 0; i < encoded.length; i++){\n                if (encoded[i] === \"*\") {\n                    if (replacements[replaceIndex]) {\n                        result += replacements[replaceIndex];\n                        replaceIndex++;\n                    }\n                } else {\n                    result += encoded[i];\n                }\n            }\n            return result || encoded;\n        }\n        // Match Proofpoint v2 format\n        const v2Match = url.match(/urldefense\\.proofpoint\\.com\\/v2\\/url\\?u=([^&]+)/);\n        if (v2Match) {\n            let encoded = v2Match[1];\n            // v2 uses -XX- for special chars\n            encoded = encoded.replace(/-3A/g, \":\").replace(/-2F/g, \"/\").replace(/-3F/g, \"?\").replace(/-3D/g, \"=\").replace(/-26/g, \"&\");\n            return encoded;\n        }\n        return null;\n    } catch (error) {\n        console.log(\"Error extracting Proofpoint URL:\", error);\n        return null;\n    }\n}\n// Extract any embedded URLs from query parameters\nfunction findEmbeddedUrls(url) {\n    const urls = [];\n    try {\n        const urlObj = new URL(url);\n        // Check each query parameter for embedded URLs\n        const params = Array.from(urlObj.searchParams.entries());\n        for (const [key, value] of params){\n            const decoded = decodeUrlRecursively(value);\n            if (decoded.startsWith(\"http://\") || decoded.startsWith(\"https://\")) {\n                urls.push(decoded);\n            }\n        }\n    } catch (error) {\n    // Ignore parsing errors\n    }\n    return urls;\n}\nasync function POST(request) {\n    try {\n        const { url } = await request.json();\n        if (!url) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"URL is required\"\n            }, {\n                status: 400\n            });\n        }\n        let finalUrl = url;\n        let queryParams = [];\n        // STEP 1: Check if this is a Proofpoint/urldefense URL and extract the real URL\n        const proofpointUrl = extractProofpointUrl(url);\n        if (proofpointUrl) {\n            console.log(\"Extracted Proofpoint URL:\", proofpointUrl);\n            finalUrl = proofpointUrl;\n        }\n        // STEP 2: Try to follow redirects (may not work for all campaign URLs)\n        try {\n            console.log(\"Attempting to follow redirects for:\", finalUrl);\n            const response = await fetch(finalUrl, {\n                method: \"GET\",\n                redirect: \"follow\",\n                headers: {\n                    \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36\",\n                    Accept: \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\",\n                    \"Accept-Language\": \"en-US,en;q=0.5\"\n                }\n            });\n            // If we got a different URL after redirects, use it\n            if (response.url && response.url !== finalUrl) {\n                console.log(\"Redirect found:\", response.url);\n                finalUrl = response.url;\n            }\n        } catch (fetchError) {\n            console.log(\"Fetch failed (expected for some campaign URLs):\", fetchError);\n        // Continue with the URL we have\n        }\n        // STEP 3: Parse the final URL and extract query parameters\n        try {\n            const urlObj = new URL(finalUrl);\n            const rawParams = Array.from(urlObj.searchParams.entries());\n            queryParams = rawParams.map(([name, value])=>{\n                const decodedValue = decodeUrlRecursively(value);\n                const isUrl = decodedValue.startsWith(\"http://\") || decodedValue.startsWith(\"https://\");\n                return {\n                    name,\n                    value: decodedValue,\n                    isUrl\n                };\n            });\n            console.log(\"Found\", queryParams.length, \"query parameters\");\n        } catch (parseError) {\n            console.log(\"URL parsing failed:\", parseError);\n        }\n        // STEP 4: If we still have no params, try parsing the original URL directly\n        if (queryParams.length === 0) {\n            try {\n                const originalUrlObj = new URL(url);\n                const rawParams = Array.from(originalUrlObj.searchParams.entries());\n                queryParams = rawParams.map(([name, value])=>{\n                    const decodedValue = decodeUrlRecursively(value);\n                    const isUrl = decodedValue.startsWith(\"http://\") || decodedValue.startsWith(\"https://\");\n                    return {\n                        name,\n                        value: decodedValue,\n                        isUrl\n                    };\n                });\n            } catch (error) {\n                console.log(\"Original URL parsing failed:\", error);\n            }\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            finalUrl,\n            queryParams,\n            originalUrl: url,\n            wasProofpoint: !!proofpointUrl\n        });\n    } catch (error) {\n        console.error(\"Error processing URL:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to process URL\",\n            details: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9hbmFseXplL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTJDO0FBRTNDLDJEQUEyRDtBQUMzRCxTQUFTQyxxQkFBcUJDLEtBQWE7SUFDekMsSUFBSTtRQUNGLElBQUlDLFVBQVVEO1FBQ2QsSUFBSUUsa0JBQWtCO1FBQ3RCLElBQUlDLGFBQWE7UUFDakIsTUFBTUMsZ0JBQWdCLElBQUkseUJBQXlCO1FBRW5ELE1BQU9ILFlBQVlDLG1CQUFtQkMsYUFBYUMsY0FBZTtZQUNoRUYsa0JBQWtCRDtZQUNsQkEsVUFBVUksbUJBQW1CSjtZQUM3QkU7UUFDRjtRQUVBLE9BQU9GO0lBQ1QsRUFBRSxPQUFPSyxPQUFPO1FBQ2QsT0FBT047SUFDVDtBQUNGO0FBRUEsdURBQXVEO0FBQ3ZELFNBQVNPLHFCQUFxQkMsR0FBVztJQUN2QyxJQUFJO1FBQ0YsaUZBQWlGO1FBQ2pGLE1BQU1DLFVBQVVELElBQUlFLEtBQUssQ0FBQztRQUMxQixJQUFJRCxTQUFTO1lBQ1gsSUFBSUUsVUFBVUYsT0FBTyxDQUFDLEVBQUU7WUFDeEIsc0RBQXNEO1lBQ3RELGtEQUFrRDtZQUNsRCxNQUFNRyxpQkFBaUJKLElBQUlFLEtBQUssQ0FBQztZQUNqQyxNQUFNRyxlQUFlRCxpQkFBaUJBLGNBQWMsQ0FBQyxFQUFFLEdBQUc7WUFFMUQsSUFBSUUsU0FBUztZQUNiLElBQUlDLGVBQWU7WUFFbkIsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUlMLFFBQVFNLE1BQU0sRUFBRUQsSUFBSztnQkFDdkMsSUFBSUwsT0FBTyxDQUFDSyxFQUFFLEtBQUssS0FBSztvQkFDdEIsSUFBSUgsWUFBWSxDQUFDRSxhQUFhLEVBQUU7d0JBQzlCRCxVQUFVRCxZQUFZLENBQUNFLGFBQWE7d0JBQ3BDQTtvQkFDRjtnQkFDRixPQUFPO29CQUNMRCxVQUFVSCxPQUFPLENBQUNLLEVBQUU7Z0JBQ3RCO1lBQ0Y7WUFFQSxPQUFPRixVQUFVSDtRQUNuQjtRQUVBLDZCQUE2QjtRQUM3QixNQUFNTyxVQUFVVixJQUFJRSxLQUFLLENBQUM7UUFDMUIsSUFBSVEsU0FBUztZQUNYLElBQUlQLFVBQVVPLE9BQU8sQ0FBQyxFQUFFO1lBQ3hCLGlDQUFpQztZQUNqQ1AsVUFBVUEsUUFBUVEsT0FBTyxDQUFDLFFBQVEsS0FBS0EsT0FBTyxDQUFDLFFBQVEsS0FBS0EsT0FBTyxDQUFDLFFBQVEsS0FBS0EsT0FBTyxDQUFDLFFBQVEsS0FBS0EsT0FBTyxDQUFDLFFBQVE7WUFDdEgsT0FBT1I7UUFDVDtRQUVBLE9BQU87SUFDVCxFQUFFLE9BQU9MLE9BQU87UUFDZGMsUUFBUUMsR0FBRyxDQUFDLG9DQUFvQ2Y7UUFDaEQsT0FBTztJQUNUO0FBQ0Y7QUFFQSxrREFBa0Q7QUFDbEQsU0FBU2dCLGlCQUFpQmQsR0FBVztJQUNuQyxNQUFNZSxPQUFpQixFQUFFO0lBQ3pCLElBQUk7UUFDRixNQUFNQyxTQUFTLElBQUlDLElBQUlqQjtRQUV2QiwrQ0FBK0M7UUFDL0MsTUFBTWtCLFNBQVNDLE1BQU1DLElBQUksQ0FBQ0osT0FBT0ssWUFBWSxDQUFDQyxPQUFPO1FBQ3JELEtBQUssTUFBTSxDQUFDQyxLQUFLL0IsTUFBTSxJQUFJMEIsT0FBUTtZQUNqQyxNQUFNekIsVUFBVUYscUJBQXFCQztZQUNyQyxJQUFJQyxRQUFRK0IsVUFBVSxDQUFDLGNBQWMvQixRQUFRK0IsVUFBVSxDQUFDLGFBQWE7Z0JBQ25FVCxLQUFLVSxJQUFJLENBQUNoQztZQUNaO1FBQ0Y7SUFDRixFQUFFLE9BQU9LLE9BQU87SUFDZCx3QkFBd0I7SUFDMUI7SUFDQSxPQUFPaUI7QUFDVDtBQUVPLGVBQWVXLEtBQUtDLE9BQWdCO0lBQ3pDLElBQUk7UUFDRixNQUFNLEVBQUUzQixHQUFHLEVBQUUsR0FBRyxNQUFNMkIsUUFBUUMsSUFBSTtRQUVsQyxJQUFJLENBQUM1QixLQUFLO1lBQ1IsT0FBT1Ysa0ZBQVlBLENBQUNzQyxJQUFJLENBQUM7Z0JBQUU5QixPQUFPO1lBQWtCLEdBQUc7Z0JBQUUrQixRQUFRO1lBQUk7UUFDdkU7UUFFQSxJQUFJQyxXQUFXOUI7UUFDZixJQUFJK0IsY0FBdUUsRUFBRTtRQUU3RSxnRkFBZ0Y7UUFDaEYsTUFBTUMsZ0JBQWdCakMscUJBQXFCQztRQUMzQyxJQUFJZ0MsZUFBZTtZQUNqQnBCLFFBQVFDLEdBQUcsQ0FBQyw2QkFBNkJtQjtZQUN6Q0YsV0FBV0U7UUFDYjtRQUVBLHVFQUF1RTtRQUN2RSxJQUFJO1lBQ0ZwQixRQUFRQyxHQUFHLENBQUMsdUNBQXVDaUI7WUFFbkQsTUFBTUcsV0FBVyxNQUFNQyxNQUFNSixVQUFVO2dCQUNyQ0ssUUFBUTtnQkFDUkMsVUFBVTtnQkFDVkMsU0FBUztvQkFDUCxjQUFjO29CQUNkQyxRQUFRO29CQUNSLG1CQUFtQjtnQkFDckI7WUFDRjtZQUVBLG9EQUFvRDtZQUNwRCxJQUFJTCxTQUFTakMsR0FBRyxJQUFJaUMsU0FBU2pDLEdBQUcsS0FBSzhCLFVBQVU7Z0JBQzdDbEIsUUFBUUMsR0FBRyxDQUFDLG1CQUFtQm9CLFNBQVNqQyxHQUFHO2dCQUMzQzhCLFdBQVdHLFNBQVNqQyxHQUFHO1lBQ3pCO1FBQ0YsRUFBRSxPQUFPdUMsWUFBWTtZQUNuQjNCLFFBQVFDLEdBQUcsQ0FBQyxtREFBbUQwQjtRQUMvRCxnQ0FBZ0M7UUFDbEM7UUFFQSwyREFBMkQ7UUFDM0QsSUFBSTtZQUNGLE1BQU12QixTQUFTLElBQUlDLElBQUlhO1lBQ3ZCLE1BQU1VLFlBQVlyQixNQUFNQyxJQUFJLENBQUNKLE9BQU9LLFlBQVksQ0FBQ0MsT0FBTztZQUV4RFMsY0FBY1MsVUFBVUMsR0FBRyxDQUFDLENBQUMsQ0FBQ0MsTUFBTWxELE1BQU07Z0JBQ3hDLE1BQU1tRCxlQUFlcEQscUJBQXFCQztnQkFDMUMsTUFBTW9ELFFBQVFELGFBQWFuQixVQUFVLENBQUMsY0FBY21CLGFBQWFuQixVQUFVLENBQUM7Z0JBQzVFLE9BQU87b0JBQ0xrQjtvQkFDQWxELE9BQU9tRDtvQkFDUEM7Z0JBQ0Y7WUFDRjtZQUVBaEMsUUFBUUMsR0FBRyxDQUFDLFNBQVNrQixZQUFZdEIsTUFBTSxFQUFFO1FBQzNDLEVBQUUsT0FBT29DLFlBQVk7WUFDbkJqQyxRQUFRQyxHQUFHLENBQUMsdUJBQXVCZ0M7UUFDckM7UUFFQSw0RUFBNEU7UUFDNUUsSUFBSWQsWUFBWXRCLE1BQU0sS0FBSyxHQUFHO1lBQzVCLElBQUk7Z0JBQ0YsTUFBTXFDLGlCQUFpQixJQUFJN0IsSUFBSWpCO2dCQUMvQixNQUFNd0MsWUFBWXJCLE1BQU1DLElBQUksQ0FBQzBCLGVBQWV6QixZQUFZLENBQUNDLE9BQU87Z0JBRWhFUyxjQUFjUyxVQUFVQyxHQUFHLENBQUMsQ0FBQyxDQUFDQyxNQUFNbEQsTUFBTTtvQkFDeEMsTUFBTW1ELGVBQWVwRCxxQkFBcUJDO29CQUMxQyxNQUFNb0QsUUFBUUQsYUFBYW5CLFVBQVUsQ0FBQyxjQUFjbUIsYUFBYW5CLFVBQVUsQ0FBQztvQkFDNUUsT0FBTzt3QkFDTGtCO3dCQUNBbEQsT0FBT21EO3dCQUNQQztvQkFDRjtnQkFDRjtZQUNGLEVBQUUsT0FBTzlDLE9BQU87Z0JBQ2RjLFFBQVFDLEdBQUcsQ0FBQyxnQ0FBZ0NmO1lBQzlDO1FBQ0Y7UUFFQSxPQUFPUixrRkFBWUEsQ0FBQ3NDLElBQUksQ0FBQztZQUN2Qm1CLFNBQVM7WUFDVGpCO1lBQ0FDO1lBQ0FpQixhQUFhaEQ7WUFDYmlELGVBQWUsQ0FBQyxDQUFDakI7UUFDbkI7SUFDRixFQUFFLE9BQU9sQyxPQUFPO1FBQ2RjLFFBQVFkLEtBQUssQ0FBQyx5QkFBeUJBO1FBQ3ZDLE9BQU9SLGtGQUFZQSxDQUFDc0MsSUFBSSxDQUN0QjtZQUNFOUIsT0FBTztZQUNQb0QsU0FBU3BELGlCQUFpQnFELFFBQVFyRCxNQUFNc0QsT0FBTyxHQUFHO1FBQ3BELEdBQ0E7WUFBRXZCLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdXJsLXF1ZXJ5LWFuYWx5emVyLy4vc3JjL2FwcC9hcGkvYW5hbHl6ZS9yb3V0ZS50cz8wN2RiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZGVjb2RlIFVSTC1lbmNvZGVkIHZhbHVlcyByZWN1cnNpdmVseVxuZnVuY3Rpb24gZGVjb2RlVXJsUmVjdXJzaXZlbHkodmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHRyeSB7XG4gICAgbGV0IGRlY29kZWQgPSB2YWx1ZTtcbiAgICBsZXQgcHJldmlvdXNEZWNvZGVkID0gXCJcIjtcbiAgICBsZXQgaXRlcmF0aW9ucyA9IDA7XG4gICAgY29uc3QgbWF4SXRlcmF0aW9ucyA9IDEwOyAvLyBQcmV2ZW50IGluZmluaXRlIGxvb3BzXG5cbiAgICB3aGlsZSAoZGVjb2RlZCAhPT0gcHJldmlvdXNEZWNvZGVkICYmIGl0ZXJhdGlvbnMgPCBtYXhJdGVyYXRpb25zKSB7XG4gICAgICBwcmV2aW91c0RlY29kZWQgPSBkZWNvZGVkO1xuICAgICAgZGVjb2RlZCA9IGRlY29kZVVSSUNvbXBvbmVudChkZWNvZGVkKTtcbiAgICAgIGl0ZXJhdGlvbnMrKztcbiAgICB9XG5cbiAgICByZXR1cm4gZGVjb2RlZDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn1cblxuLy8gRXh0cmFjdCBlbWJlZGRlZCBVUkwgZnJvbSBQcm9vZnBvaW50L3VybGRlZmVuc2UgVVJMc1xuZnVuY3Rpb24gZXh0cmFjdFByb29mcG9pbnRVcmwodXJsOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgdHJ5IHtcbiAgICAvLyBNYXRjaCBQcm9vZnBvaW50IHYzIGZvcm1hdDogaHR0cHM6Ly91cmxkZWZlbnNlLmNvbS92My9fX0VOQ09ERURfVVJMX19TSUdOQVRVUkVcbiAgICBjb25zdCB2M01hdGNoID0gdXJsLm1hdGNoKC91cmxkZWZlbnNlXFwuY29tXFwvdjNcXC9fXyguKz8pX187Lyk7XG4gICAgaWYgKHYzTWF0Y2gpIHtcbiAgICAgIGxldCBlbmNvZGVkID0gdjNNYXRjaFsxXTtcbiAgICAgIC8vIFByb29mcG9pbnQgZW5jb2Rpbmc6ICogPSBzcGVjaWFsIGNoYXIsICoqID0gOiwgZXRjLlxuICAgICAgLy8gVGhlIHBhdHRlcm4gYWZ0ZXIgX18gY29udGFpbnMgcmVwbGFjZW1lbnQgY2hhcnNcbiAgICAgIGNvbnN0IHNpZ25hdHVyZU1hdGNoID0gdXJsLm1hdGNoKC9fXzsoW14hXSspISEvKTtcbiAgICAgIGNvbnN0IHJlcGxhY2VtZW50cyA9IHNpZ25hdHVyZU1hdGNoID8gc2lnbmF0dXJlTWF0Y2hbMV0gOiBcIlwiO1xuXG4gICAgICBsZXQgcmVzdWx0ID0gXCJcIjtcbiAgICAgIGxldCByZXBsYWNlSW5kZXggPSAwO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVuY29kZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGVuY29kZWRbaV0gPT09IFwiKlwiKSB7XG4gICAgICAgICAgaWYgKHJlcGxhY2VtZW50c1tyZXBsYWNlSW5kZXhdKSB7XG4gICAgICAgICAgICByZXN1bHQgKz0gcmVwbGFjZW1lbnRzW3JlcGxhY2VJbmRleF07XG4gICAgICAgICAgICByZXBsYWNlSW5kZXgrKztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ICs9IGVuY29kZWRbaV07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdCB8fCBlbmNvZGVkO1xuICAgIH1cblxuICAgIC8vIE1hdGNoIFByb29mcG9pbnQgdjIgZm9ybWF0XG4gICAgY29uc3QgdjJNYXRjaCA9IHVybC5tYXRjaCgvdXJsZGVmZW5zZVxcLnByb29mcG9pbnRcXC5jb21cXC92MlxcL3VybFxcP3U9KFteJl0rKS8pO1xuICAgIGlmICh2Mk1hdGNoKSB7XG4gICAgICBsZXQgZW5jb2RlZCA9IHYyTWF0Y2hbMV07XG4gICAgICAvLyB2MiB1c2VzIC1YWC0gZm9yIHNwZWNpYWwgY2hhcnNcbiAgICAgIGVuY29kZWQgPSBlbmNvZGVkLnJlcGxhY2UoLy0zQS9nLCBcIjpcIikucmVwbGFjZSgvLTJGL2csIFwiL1wiKS5yZXBsYWNlKC8tM0YvZywgXCI/XCIpLnJlcGxhY2UoLy0zRC9nLCBcIj1cIikucmVwbGFjZSgvLTI2L2csIFwiJlwiKTtcbiAgICAgIHJldHVybiBlbmNvZGVkO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgZXh0cmFjdGluZyBQcm9vZnBvaW50IFVSTDpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8vIEV4dHJhY3QgYW55IGVtYmVkZGVkIFVSTHMgZnJvbSBxdWVyeSBwYXJhbWV0ZXJzXG5mdW5jdGlvbiBmaW5kRW1iZWRkZWRVcmxzKHVybDogc3RyaW5nKTogc3RyaW5nW10ge1xuICBjb25zdCB1cmxzOiBzdHJpbmdbXSA9IFtdO1xuICB0cnkge1xuICAgIGNvbnN0IHVybE9iaiA9IG5ldyBVUkwodXJsKTtcblxuICAgIC8vIENoZWNrIGVhY2ggcXVlcnkgcGFyYW1ldGVyIGZvciBlbWJlZGRlZCBVUkxzXG4gICAgY29uc3QgcGFyYW1zID0gQXJyYXkuZnJvbSh1cmxPYmouc2VhcmNoUGFyYW1zLmVudHJpZXMoKSk7XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgcGFyYW1zKSB7XG4gICAgICBjb25zdCBkZWNvZGVkID0gZGVjb2RlVXJsUmVjdXJzaXZlbHkodmFsdWUpO1xuICAgICAgaWYgKGRlY29kZWQuc3RhcnRzV2l0aChcImh0dHA6Ly9cIikgfHwgZGVjb2RlZC5zdGFydHNXaXRoKFwiaHR0cHM6Ly9cIikpIHtcbiAgICAgICAgdXJscy5wdXNoKGRlY29kZWQpO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAvLyBJZ25vcmUgcGFyc2luZyBlcnJvcnNcbiAgfVxuICByZXR1cm4gdXJscztcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogUmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgdXJsIH0gPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcblxuICAgIGlmICghdXJsKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJVUkwgaXMgcmVxdWlyZWRcIiB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cblxuICAgIGxldCBmaW5hbFVybCA9IHVybDtcbiAgICBsZXQgcXVlcnlQYXJhbXM6IEFycmF5PHsgbmFtZTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nOyBpc1VybD86IGJvb2xlYW4gfT4gPSBbXTtcblxuICAgIC8vIFNURVAgMTogQ2hlY2sgaWYgdGhpcyBpcyBhIFByb29mcG9pbnQvdXJsZGVmZW5zZSBVUkwgYW5kIGV4dHJhY3QgdGhlIHJlYWwgVVJMXG4gICAgY29uc3QgcHJvb2Zwb2ludFVybCA9IGV4dHJhY3RQcm9vZnBvaW50VXJsKHVybCk7XG4gICAgaWYgKHByb29mcG9pbnRVcmwpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiRXh0cmFjdGVkIFByb29mcG9pbnQgVVJMOlwiLCBwcm9vZnBvaW50VXJsKTtcbiAgICAgIGZpbmFsVXJsID0gcHJvb2Zwb2ludFVybDtcbiAgICB9XG5cbiAgICAvLyBTVEVQIDI6IFRyeSB0byBmb2xsb3cgcmVkaXJlY3RzIChtYXkgbm90IHdvcmsgZm9yIGFsbCBjYW1wYWlnbiBVUkxzKVxuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkF0dGVtcHRpbmcgdG8gZm9sbG93IHJlZGlyZWN0cyBmb3I6XCIsIGZpbmFsVXJsKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChmaW5hbFVybCwge1xuICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgIHJlZGlyZWN0OiBcImZvbGxvd1wiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJVc2VyLUFnZW50XCI6IFwiTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMC4wLjAuMCBTYWZhcmkvNTM3LjM2XCIsXG4gICAgICAgICAgQWNjZXB0OiBcInRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsKi8qO3E9MC44XCIsXG4gICAgICAgICAgXCJBY2NlcHQtTGFuZ3VhZ2VcIjogXCJlbi1VUyxlbjtxPTAuNVwiLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIElmIHdlIGdvdCBhIGRpZmZlcmVudCBVUkwgYWZ0ZXIgcmVkaXJlY3RzLCB1c2UgaXRcbiAgICAgIGlmIChyZXNwb25zZS51cmwgJiYgcmVzcG9uc2UudXJsICE9PSBmaW5hbFVybCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIlJlZGlyZWN0IGZvdW5kOlwiLCByZXNwb25zZS51cmwpO1xuICAgICAgICBmaW5hbFVybCA9IHJlc3BvbnNlLnVybDtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChmZXRjaEVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkZldGNoIGZhaWxlZCAoZXhwZWN0ZWQgZm9yIHNvbWUgY2FtcGFpZ24gVVJMcyk6XCIsIGZldGNoRXJyb3IpO1xuICAgICAgLy8gQ29udGludWUgd2l0aCB0aGUgVVJMIHdlIGhhdmVcbiAgICB9XG5cbiAgICAvLyBTVEVQIDM6IFBhcnNlIHRoZSBmaW5hbCBVUkwgYW5kIGV4dHJhY3QgcXVlcnkgcGFyYW1ldGVyc1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1cmxPYmogPSBuZXcgVVJMKGZpbmFsVXJsKTtcbiAgICAgIGNvbnN0IHJhd1BhcmFtcyA9IEFycmF5LmZyb20odXJsT2JqLnNlYXJjaFBhcmFtcy5lbnRyaWVzKCkpO1xuXG4gICAgICBxdWVyeVBhcmFtcyA9IHJhd1BhcmFtcy5tYXAoKFtuYW1lLCB2YWx1ZV0pID0+IHtcbiAgICAgICAgY29uc3QgZGVjb2RlZFZhbHVlID0gZGVjb2RlVXJsUmVjdXJzaXZlbHkodmFsdWUpO1xuICAgICAgICBjb25zdCBpc1VybCA9IGRlY29kZWRWYWx1ZS5zdGFydHNXaXRoKFwiaHR0cDovL1wiKSB8fCBkZWNvZGVkVmFsdWUuc3RhcnRzV2l0aChcImh0dHBzOi8vXCIpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgdmFsdWU6IGRlY29kZWRWYWx1ZSxcbiAgICAgICAgICBpc1VybCxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zb2xlLmxvZyhcIkZvdW5kXCIsIHF1ZXJ5UGFyYW1zLmxlbmd0aCwgXCJxdWVyeSBwYXJhbWV0ZXJzXCIpO1xuICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiVVJMIHBhcnNpbmcgZmFpbGVkOlwiLCBwYXJzZUVycm9yKTtcbiAgICB9XG5cbiAgICAvLyBTVEVQIDQ6IElmIHdlIHN0aWxsIGhhdmUgbm8gcGFyYW1zLCB0cnkgcGFyc2luZyB0aGUgb3JpZ2luYWwgVVJMIGRpcmVjdGx5XG4gICAgaWYgKHF1ZXJ5UGFyYW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxVcmxPYmogPSBuZXcgVVJMKHVybCk7XG4gICAgICAgIGNvbnN0IHJhd1BhcmFtcyA9IEFycmF5LmZyb20ob3JpZ2luYWxVcmxPYmouc2VhcmNoUGFyYW1zLmVudHJpZXMoKSk7XG5cbiAgICAgICAgcXVlcnlQYXJhbXMgPSByYXdQYXJhbXMubWFwKChbbmFtZSwgdmFsdWVdKSA9PiB7XG4gICAgICAgICAgY29uc3QgZGVjb2RlZFZhbHVlID0gZGVjb2RlVXJsUmVjdXJzaXZlbHkodmFsdWUpO1xuICAgICAgICAgIGNvbnN0IGlzVXJsID0gZGVjb2RlZFZhbHVlLnN0YXJ0c1dpdGgoXCJodHRwOi8vXCIpIHx8IGRlY29kZWRWYWx1ZS5zdGFydHNXaXRoKFwiaHR0cHM6Ly9cIik7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICB2YWx1ZTogZGVjb2RlZFZhbHVlLFxuICAgICAgICAgICAgaXNVcmwsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZyhcIk9yaWdpbmFsIFVSTCBwYXJzaW5nIGZhaWxlZDpcIiwgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZmluYWxVcmwsXG4gICAgICBxdWVyeVBhcmFtcyxcbiAgICAgIG9yaWdpbmFsVXJsOiB1cmwsXG4gICAgICB3YXNQcm9vZnBvaW50OiAhIXByb29mcG9pbnRVcmwsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIHByb2Nlc3NpbmcgVVJMOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAge1xuICAgICAgICBlcnJvcjogXCJGYWlsZWQgdG8gcHJvY2VzcyBVUkxcIixcbiAgICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIixcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZGVjb2RlVXJsUmVjdXJzaXZlbHkiLCJ2YWx1ZSIsImRlY29kZWQiLCJwcmV2aW91c0RlY29kZWQiLCJpdGVyYXRpb25zIiwibWF4SXRlcmF0aW9ucyIsImRlY29kZVVSSUNvbXBvbmVudCIsImVycm9yIiwiZXh0cmFjdFByb29mcG9pbnRVcmwiLCJ1cmwiLCJ2M01hdGNoIiwibWF0Y2giLCJlbmNvZGVkIiwic2lnbmF0dXJlTWF0Y2giLCJyZXBsYWNlbWVudHMiLCJyZXN1bHQiLCJyZXBsYWNlSW5kZXgiLCJpIiwibGVuZ3RoIiwidjJNYXRjaCIsInJlcGxhY2UiLCJjb25zb2xlIiwibG9nIiwiZmluZEVtYmVkZGVkVXJscyIsInVybHMiLCJ1cmxPYmoiLCJVUkwiLCJwYXJhbXMiLCJBcnJheSIsImZyb20iLCJzZWFyY2hQYXJhbXMiLCJlbnRyaWVzIiwia2V5Iiwic3RhcnRzV2l0aCIsInB1c2giLCJQT1NUIiwicmVxdWVzdCIsImpzb24iLCJzdGF0dXMiLCJmaW5hbFVybCIsInF1ZXJ5UGFyYW1zIiwicHJvb2Zwb2ludFVybCIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJyZWRpcmVjdCIsImhlYWRlcnMiLCJBY2NlcHQiLCJmZXRjaEVycm9yIiwicmF3UGFyYW1zIiwibWFwIiwibmFtZSIsImRlY29kZWRWYWx1ZSIsImlzVXJsIiwicGFyc2VFcnJvciIsIm9yaWdpbmFsVXJsT2JqIiwic3VjY2VzcyIsIm9yaWdpbmFsVXJsIiwid2FzUHJvb2Zwb2ludCIsImRldGFpbHMiLCJFcnJvciIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/analyze/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=%2FUsers%2Fa6ee6%2FCascadeProjects%2Fwindsurf-project-4%2Furl-query-analyzer%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fa6ee6%2FCascadeProjects%2Fwindsurf-project-4%2Furl-query-analyzer&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();